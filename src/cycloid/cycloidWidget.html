<!-- Bootstrap (only include once per page) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" /><!-- KaTeX (only include once per page) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" />
<script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script> 
<script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" onload=
"renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'\\(',right:'\\)',display:false}]});"></script>
<div class="container my-4">
    <div class="row">
        <div class="col-12">
            <h3 class="mb-3">
                Cycloid
            </h3>
        </div>
        <!-- Formulas -->

        <div class="col-12 col-lg-10">
            <p class="mb-2 fw-semibold">
                Trochoid (general point at distance \(d\) from the circle center)
            </p>
            $$ x(\theta) = R\,\theta - d\,\sin\theta,\qquad y(\theta) = R - d\,\cos\theta. $$
            <p class="mb-2 fw-semibold">
                Cycloid (special case \(d=R\))
            </p>
            $$ x(\theta) = R\left(\theta - \sin\theta\right),\qquad y(\theta) = R\left(1 - \cos\theta\right). $$
        </div>
    </div>

    <div class="row mt-4">
        <!-- Controls -->

        <div class="col-12 col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm">
                <div class="mb-3">
                    <label for="cycloidDistanceInput" class="form-label">Distance from center \(d\)</label> <input type="number" id="cycloidDistanceInput" class="form-control" value="1" min="0" step=
                    "0.01" />
                </div>

                <div class="mb-3">
                    <label for="cycloidAngleSlider" class="form-label">Point angle \( \theta \) (degrees)</label>
                    <div class="row gx-2 align-items-center">
                        <div class="col">
                            <input type="range" id="cycloidAngleSlider" class="form-range" min="0" max="360" step="1" value="0" />
                        </div>

                        <div class="col-auto" style="width: 5rem;">
                            <input type="number" id="cycloidThetaInput" class="form-control" min="0" max="360" step="1" value="0" />
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="cycloidSlider" class="form-label">Position \( t \in [0,\,4\pi] \)</label>
                    <div class="row gx-2 align-items-center">
                        <div class="col">
                            <input type="range" id="cycloidSlider" class="form-range" min="0" max="12.56" step="0.01" value="0" />
                        </div>

                        <div class="col-auto" style="width: 6rem;">
                            <input type="number" id="cycloidTInput" class="form-control" min="0" max="12.56" step="0.01" value="0" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- iFrame -->

        <div class="col-12 col-md-8 d-flex justify-content-center align-items-center">
            <div class="ratio ratio-16x9" style="max-width: 700px; width: 100%;">
                <iframe id="cycloidFrame" class="w-100 h-100 border-0" allowfullscreen="allowfullscreen" name="cycloidFrame"></iframe>
            </div>
        </div>
    </div>
</div>
<script>
/* <![CDATA[ */
  // Run after DOM is ready (more robust on site builders)
  window.addEventListener('DOMContentLoaded', () => {
    const cycloidIframe = document.getElementById('cycloidFrame');
    cycloidIframe.src = "https://yannick168.github.io/Bachelorarbeit/src/cycloid/cycloid.html?v=" + Date.now();

    function sendCycloidUpdate() {
      const t = parseFloat(document.getElementById('cycloidTInput').value);
      const theta = parseFloat(document.getElementById('cycloidThetaInput').value);
      const distance = parseFloat(document.getElementById('cycloidDistanceInput').value);

      if (cycloidIframe && !isNaN(t) && !isNaN(theta) && !isNaN(distance)) {
        cycloidIframe.contentWindow.postMessage({ type: 'update', t, theta, distance }, '*');
      }
    }

    function syncCycloidSlider(sliderId, inputId) {
      const slider = document.getElementById(sliderId);
      const input = document.getElementById(inputId);

      slider.addEventListener('input', () => {
        input.value = slider.value;
        sendCycloidUpdate();
      });

      input.addEventListener('input', () => {
        slider.value = input.value;
        sendCycloidUpdate();
      });
    }

    syncCycloidSlider('cycloidSlider', 'cycloidTInput');
    syncCycloidSlider('cycloidAngleSlider', 'cycloidThetaInput');
    document.getElementById('cycloidDistanceInput').addEventListener('input', sendCycloidUpdate);

    // initial push (after a short delay to let the iframe boot)
    setTimeout(sendCycloidUpdate, 300);
  });
/*]]>*/
</script>