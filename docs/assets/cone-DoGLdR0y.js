import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as _,V as h,E as A,c as C,d as D,e as j,W as z,j as I,k as F,l as K,f as V,g as y,m as W,n as q,D as B,B as G,o as v,i as H,L as O}from"./three.module-aOtbklaL.js";const a=new A(0,0,0,"YXZ"),c=new h,T={type:"change"},R={type:"lock"},U={type:"unlock"},p=.002,E=Math.PI/2;class Y extends _{constructor(t,n=null){super(t,n),this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=Q.bind(this),this._onPointerlockChange=X.bind(this),this._onPointerlockError=N.bind(this),this.domElement!==null&&this.connect(this.domElement)}connect(t){super.connect(t),this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return console.warn("THREE.PointerLockControls: getObject() has been deprecated. Use controls.object instead."),this.object}getDirection(t){return t.set(0,0,-1).applyQuaternion(this.object.quaternion)}moveForward(t){if(this.enabled===!1)return;const n=this.object;c.setFromMatrixColumn(n.matrix,0),c.crossVectors(n.up,c),n.position.addScaledVector(c,t)}moveRight(t){if(this.enabled===!1)return;const n=this.object;c.setFromMatrixColumn(n.matrix,0),n.position.addScaledVector(c,t)}lock(t=!1){this.domElement.requestPointerLock({unadjustedMovement:t})}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function Q(e){if(this.enabled===!1||this.isLocked===!1)return;const t=this.object;a.setFromQuaternion(t.quaternion),a.y-=e.movementX*p*this.pointerSpeed,a.x-=e.movementY*p*this.pointerSpeed,a.x=Math.max(E-this.maxPolarAngle,Math.min(E-this.minPolarAngle,a.x)),t.quaternion.setFromEuler(a),this.dispatchEvent(T)}function X(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(R),this.isLocked=!0):(this.dispatchEvent(U),this.isLocked=!1)}function N(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const s=new C;s.background=new D(16777215);const r=new j(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(0,1.6,5);r.lookAt(0,0,0);const u=new z({antialias:!0});u.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(u.domElement);const d=new Y(r,document.body);s.add(d.getObject());const L=document.getElementById("overlay");d.addEventListener("lock",()=>{L.style.display="none"});d.addEventListener("unlock",()=>{L.style.display="flex"});document.body.addEventListener("click",()=>{d.lock()});s.add(new I(8947848));const b=new F(16777215,1);b.position.set(5,5,5);s.add(b);const P=new K(1,2,32);P.center();const Z=new V({color:16733474}),J=new y(P,Z);s.add(J);const x=new y(new W(100,100),new q({color:15790320,side:B}));x.rotation.x=-Math.PI/2;s.add(x);const f=5,$=new Float32Array([0,0,0,f,0,0,0,0,0,0,f,0,0,0,0,0,0,f]),ee=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]),w=new G;w.setAttribute("position",new v($,3));w.setAttribute("color",new v(ee,3));const te=new H({vertexColors:!0}),oe=new O(w,te);s.add(oe);const o={forward:!1,backward:!1,left:!1,right:!1,up:!1,down:!1};window.addEventListener("keydown",e=>{e.code==="KeyW"&&(o.forward=!0),e.code==="KeyS"&&(o.backward=!0),e.code==="KeyA"&&(o.left=!0),e.code==="KeyD"&&(o.right=!0),e.code==="Space"&&(o.up=!0),e.code==="ShiftLeft"&&(o.down=!0)});window.addEventListener("keyup",e=>{e.code==="KeyW"&&(o.forward=!1),e.code==="KeyS"&&(o.backward=!1),e.code==="KeyA"&&(o.left=!1),e.code==="KeyD"&&(o.right=!1),e.code==="Space"&&(o.up=!1),e.code==="ShiftLeft"&&(o.down=!1)});const k=5;let g=performance.now();const i=new h,l=new h,m=new h;function M(){requestAnimationFrame(M);const e=performance.now(),t=(e-g)/1e3;if(g=e,d.isLocked){if(i.set(0,0,0),l.set(0,0,0),o.forward&&(i.z-=1),o.backward&&(i.z+=1),o.left&&(i.x-=1),o.right&&(i.x+=1),o.up&&(l.y+=1),o.down&&(l.y-=1),i.lengthSq()>0){i.normalize(),r.getWorldDirection(m),m.y=0,m.normalize();const S=Math.atan2(m.x,m.z);i.applyAxisAngle(new h(0,1,0),S),i.multiplyScalar(k*t)}l.lengthSq()>0&&l.normalize().multiplyScalar(k*t);const n=d.getObject();n.position.add(i),n.position.add(l)}u.render(s,r)}M();window.addEventListener("resize",()=>{const e=window.innerWidth,t=window.innerHeight;u.setSize(e,t),r.aspect=e/t,r.updateProjectionMatrix()});
