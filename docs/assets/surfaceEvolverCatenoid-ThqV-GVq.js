import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as F,P as M,W as y,D as v,f as N,B as E,F as I,l as S,m as z,c as L,n as A,V as m}from"./three.module-Dzl-6arX.js";import{O as W}from"./OrbitControls-C5UR_-od.js";const h=new F,c=new M(45,window.innerWidth/window.innerHeight,.1,1e3);c.position.set(2,2,3);const u=new y({antialias:!0});u.setSize(window.innerWidth,window.innerHeight);u.setClearColor(16777215);document.body.appendChild(u.domElement);const w=new W(c,u.domElement);w.enableDamping=!0;const g=new v(16777215,.8);g.position.set(3,3,3);h.add(g);h.add(new N(4210752));window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)});function C(d){const r=d.split(`
`),n=[],o=[],l=[];let e=null;for(let t of r){if(t=t.trim(),t===""||t.startsWith("//")){e=null;continue}if(/^vertices\b/i.test(t)){e="vertices";continue}if(/^edges\b/i.test(t)){e="edges";continue}if(/^(faces|facets)\b/i.test(t)){e="faces";continue}if(e==="vertices"){const a=t.match(/\(\s*([\-\d.eE+]+)\s+([\-\d.eE+]+)\s+([\-\d.eE+]+)\s*\)/);if(a){const i=parseFloat(a[1]),f=parseFloat(a[2]),p=parseFloat(a[3]);if(!isNaN(i)&&!isNaN(f)&&!isNaN(p)){n.push([i,f,p]);continue}}const s=t.split(/\s+/);if(s.length>=4){const i=parseFloat(s[1]),f=parseFloat(s[2]),p=parseFloat(s[3]);!isNaN(i)&&!isNaN(f)&&!isNaN(p)&&n.push([i,f,p])}}if(e==="edges"){const a=t.split(/\s+/);if(a.length>=3){const s=parseInt(a[1])-1,i=parseInt(a[2])-1;!isNaN(s)&&!isNaN(i)&&o.push([s,i])}}if(e==="faces"){if(t==="bodies  /* facets */"){e=null;continue}const s=t.replace(/\/\*.*?\*\//g,"").replace(/^face\s+/i,"").trim().split(/\s+/),i=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];let f=[];for(let p of i){let x=Math.abs(p)-1;p<0?f.push(o[x][1]):f.push(o[x][0])}l.push(f)}}return{vertices:n,faces:l}}function P(d){const r=new E,n=[];for(const l of d.faces)if(!(!Array.isArray(l)||l.length!==3))for(const e of l){const t=d.vertices[e];if(!t){console.warn(`Fehlender Vertex fÃ¼r Index ${e}`);continue}const[a,s,i]=t;n.push(a,s,i)}r.setAttribute("position",new I(n,3)),r.computeVertexNormals();const o=new S({color:6724044,side:z,flatShading:!1});return new L(r,o)}function D(d){const r=new A().setFromObject(d),n=r.getSize(new m),o=r.getCenter(new m),e=(Math.max(n.x,n.y,n.z)*.6+1e-6)/Math.tan(c.fov*Math.PI/360);c.position.copy(o.clone().add(new m(e,e,e))),c.near=Math.max(.01,e*.01),c.far=Math.max(1e3,e*10),c.updateProjectionMatrix(),w.target.copy(o),w.update()}async function j(){const r=new URL(window.location.href).searchParams.get("fe")||"test.fe",n=new URL(r,window.location.href).toString(),o=await fetch(n);if(!o.ok)throw new Error(`Konnte ${n} nicht laden (${o.status})`);const l=await o.text(),e=C(l),t=P(e);h.clear(),h.add(g),h.add(new N(4210752)),h.add(t),D(t)}j().catch(d=>console.error(d));function b(){requestAnimationFrame(b),w.update(),u.render(h,c)}b();
