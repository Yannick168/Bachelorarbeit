import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{W,S as A,O as Z,e as c,h as L,d as g,i as k,j as q,V as s,k as D,l as X,m as Y,b as H}from"./three.module-DINZjAyq.js";import{r as J}from"./resizeViewport-McQ4z10F.js";const S=document.getElementById("canvas"),y=new W({canvas:S,antialias:!0});y.setPixelRatio(window.devicePixelRatio);y.setClearColor(16777215);const r=new A,w=new Z(-10,10,5,-5,.1,100);w.position.set(0,0,10);let n=1;const C=Math.PI*4,K=.05;let z=1,f,d,h,l,p,u,O=!1;function N(){const e=C+2;J(y,w,S,e,16/9,!1),w.updateProjectionMatrix()}function T(){O||(N(),O=!0)}function Q(e){return new s(n+n*e,n,-.01)}function E(){const e=Math.max(.5,.1*n),o=0-e,t=n*(2+C)+e;return{xmin:o,xmax:t}}function U(){const{xmin:e,xmax:o}=E(),t=new c().setFromPoints([new s(e,0,0),new s(o,0,0)]),i=new g({color:0,depthTest:!1});return new L(t,i)}function v(){[f,d,h,l,p,u].forEach(a=>{a&&r.remove(a)}),T(),u=U(),r.add(u);const e=new c().setFromPoints([]);f=new L(e,new g({color:255,depthTest:!1})),r.add(f);const o=new c().setFromPoints([]);d=new k(o,new q({color:255,size:Math.max(.04*n,.03),sizeAttenuation:!1})),d.material.depthTest=!1,r.add(d);const t=[],i=64;for(let a=0;a<=i;a++){const P=a/i*Math.PI*2;t.push(new s(Math.cos(P)*n,Math.sin(P)*n,0))}const M=new c().setFromPoints(t);h=new D(M,new g({color:0})),r.add(h);const m=new X(.1*n,16),F=new Y({color:16711680});l=new H(m,F),l.renderOrder=10,r.add(l);const G=new c().setFromPoints([new s,new s]);p=new L(G,new g({color:0,depthTest:!1})),p.renderOrder=5,r.add(p),V(0)}function V(e){if(!h||!l||!p||!f||!d)return;const o=Q(e),t=-e-Math.PI/2;h.position.copy(o),h.rotation.z=-e;const i=new s(Math.cos(t),Math.sin(t),0).multiplyScalar(z);l.position.copy(o.clone().add(i));const M=[o.clone().setZ(0),l.position.clone().setZ(0)];p.geometry.setFromPoints(M);const m=[],F=Math.min(0,e),G=Math.max(0,e);for(let x=F;x<=G+1e-9;x+=K){const b=n+n*x,I=-x-Math.PI/2,j=new s(Math.cos(I),Math.sin(I),0).multiplyScalar(z);m.push(new s(b,n,0).add(j))}const a=new c().setFromPoints(m);f.geometry.dispose(),f.geometry=a;const P=new c().setFromPoints(m);d.geometry.dispose(),d.geometry=P}window.addEventListener("resize",()=>{O=!1,T(),v()});T();v();function B(){requestAnimationFrame(B),y.render(r,w)}B();window.updateTrochoid=(e,o,t)=>{if(typeof t=="number"&&isFinite(t)&&t>0&&(n=t),z=o,u){const{xmin:i,xmax:M}=E(),m=new c().setFromPoints([new s(i,0,0),new s(M,0,0)]);u.geometry.dispose(),u.geometry=m}v(),V(e)};S.addEventListener("wheel",e=>{e.preventDefault(),e.deltaY<0?w.zoom*=1.1:w.zoom/=1.1,w.updateProjectionMatrix()});
