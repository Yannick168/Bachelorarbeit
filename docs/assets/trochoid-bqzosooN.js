import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{W,S as A,O as Z,e as c,h as L,d as g,i as k,j as q,V as s,k as D,l as X,m as Y,b as H}from"./three.module-DINZjAyq.js";import{r as J}from"./resizeViewport-McQ4z10F.js";const T=document.getElementById("canvas"),y=new W({canvas:T,antialias:!0});y.setPixelRatio(window.devicePixelRatio);y.setClearColor(16777215);const r=new A,l=new Z(-10,10,5,-5,.1,100);l.position.set(0,0,10);let n=1;const E=Math.PI*4,K=.05;let z=1,w,d,p,f,M,h,S=!1;function N(){const e=E+2;J(y,l,T,e,16/9,!1),l.updateProjectionMatrix()}function v(){S||(N(),S=!0)}function Q(e){return new s(n+n*e,n,-.01)}function O(){const e=Math.max(.5,.1*n),o=0-e,t=n*(2+E)+e;return{xmin:o,xmax:t}}function U(){const{xmin:e,xmax:o}=O(),t=new c().setFromPoints([new s(e,0,0),new s(o,0,0)]),i=new g({color:0,depthTest:!1});return new L(t,i)}function I(){[w,d,p,f,M,h].forEach(a=>{a&&r.remove(a)}),v(),h=U(),r.add(h);const e=new c().setFromPoints([]);w=new L(e,new g({color:255,depthTest:!1})),r.add(w);const o=new c().setFromPoints([]);d=new k(o,new q({color:255,size:Math.max(.04*n,.03),sizeAttenuation:!1})),d.material.depthTest=!1,r.add(d);const t=[],i=64;for(let a=0;a<=i;a++){const P=a/i*Math.PI*2;t.push(new s(Math.cos(P)*n,Math.sin(P)*n,0))}const u=new c().setFromPoints(t);p=new D(u,new g({color:0})),r.add(p);const m=new X(.1*n,16),F=new Y({color:16711680});f=new H(m,F),r.add(f);const G=new c().setFromPoints([new s,new s]);M=new L(G,new g({color:0,depthTest:!1})),r.add(M),V(0)}function V(e){if(!p||!f||!M||!w||!d)return;const o=Q(e),t=-e-Math.PI/2;p.position.copy(o),p.rotation.z=-e;const i=new s(Math.cos(t),Math.sin(t),0).multiplyScalar(z);f.position.copy(o.clone().add(i));const u=[o.clone().setZ(0),f.position.clone().setZ(0)];M.geometry.setFromPoints(u);const m=[],F=Math.min(0,e),G=Math.max(0,e);for(let x=F;x<=G+1e-9;x+=K){const b=n+n*x,C=-x-Math.PI/2,j=new s(Math.cos(C),Math.sin(C),0).multiplyScalar(z);m.push(new s(b,n,0).add(j))}const a=new c().setFromPoints(m);w.geometry.dispose(),w.geometry=a;const P=new c().setFromPoints(m);d.geometry.dispose(),d.geometry=P}window.addEventListener("resize",()=>{S=!1,v(),I()});v();I();function B(){requestAnimationFrame(B),y.render(r,l)}B();window.updateTrochoid=(e,o,t)=>{if(typeof t=="number"&&isFinite(t)&&t>0&&(n=t),z=o,h){const{xmin:i,xmax:u}=O(),m=new c().setFromPoints([new s(i,0,0),new s(u,0,0)]);h.geometry.dispose(),h.geometry=m}I(),V(e)};T.addEventListener("wheel",e=>{e.preventDefault(),e.deltaY<0?l.zoom*=1.1:l.zoom/=1.1,l.updateProjectionMatrix()});
