import{W,S as A,O as Z,e as d,g as L,d as y,h as k,i as q,V as i,j as D,k as X,l as Y,b as H}from"./three.module-B-_qvbDJ.js";/* empty css              */import{r as J}from"./resizeViewport-McQ4z10F.js";const z=document.getElementById("canvas"),F=new W({canvas:z,antialias:!0});F.setPixelRatio(window.devicePixelRatio);F.setClearColor(16777215);const c=new A,l=new Z(-10,10,5,-5,.1,100);l.position.set(0,0,10);let n=1;const C=Math.PI*4,K=.05;let g=1,f,m,h,w,p,u,T=!1;function N(){const e=C+2;J(F,l,z,e,16/9,!1),l.updateProjectionMatrix()}function O(){T||(N(),T=!0)}function Q(e){return new i(n+n*e,n,-.01)}function E(){const e=Math.max(.5,.1*n),s=0-e,t=n*(2+C)+e;return{xmin:s,xmax:t}}function U(){const{xmin:e,xmax:s}=E(),t=new d().setFromPoints([new i(e,0,0),new i(s,0,0)]),r=new y({color:0,depthTest:!1});return new L(t,r)}function v(){[f,m,h,w,p,u].forEach(a=>{a&&c.remove(a)}),O(),u=U(),c.add(u);const e=new d().setFromPoints([]);f=new L(e,new y({color:255,depthTest:!1})),c.add(f);const s=new d().setFromPoints([]);m=new k(s,new q({color:255,size:Math.max(.04*n,.03),sizeAttenuation:!1})),m.material.depthTest=!1,c.add(m);const t=[],r=64;for(let a=0;a<=r;a++){const o=a/r*Math.PI*2;t.push(new i(Math.cos(o)*n,Math.sin(o)*n,0))}const M=new d().setFromPoints(t);h=new D(M,new y({color:0})),c.add(h);const P=new X(.1*n,16),x=new Y({color:16711680,depthTest:!1});w=new H(P,x),w.renderOrder=10,c.add(w);const G=new d().setFromPoints([new i,new i]);p=new L(G,new y({color:0,depthTest:!1})),p.renderOrder=5,c.add(p),S(0)}function S(e){if(!h||!w||!p||!f||!m)return;const s=Q(e);h.position.copy(s),h.rotation.z=-e;const t=Math.sin(e),r=Math.cos(e),M=new i(-g*t,-g*r,0);w.position.copy(s.clone().add(M));const P=[s.clone().setZ(0),w.position.clone().setZ(0)];p.geometry.setFromPoints(P);const x=[],G=Math.min(0,e),a=Math.max(0,e);for(let o=G;o<=a+1e-9;o+=K){const B=n+n*o,I=Math.sin(o),b=Math.cos(o),j=new i(-g*I,-g*b,0);x.push(new i(B,n,0).add(j))}{const o=new d().setFromPoints(x);f.geometry.dispose(),f.geometry=o}{const o=new d().setFromPoints(x);m.geometry.dispose(),m.geometry=o}}window.addEventListener("resize",()=>{T=!1,O(),v()});O();v();function V(){requestAnimationFrame(V),F.render(c,l)}V();window.updateTrochoid=(e,s,t)=>{if(typeof t=="number"&&isFinite(t)&&t>0&&(n=t),g=s,u){const{xmin:r,xmax:M}=E(),P=new d().setFromPoints([new i(r,0,0),new i(M,0,0)]);u.geometry.dispose(),u.geometry=P}v(),S(e)};z.addEventListener("wheel",e=>{e.preventDefault(),e.deltaY<0?l.zoom*=1.1:l.zoom/=1.1,l.updateProjectionMatrix()});
