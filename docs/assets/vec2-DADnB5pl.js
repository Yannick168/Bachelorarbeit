import{A as h,E as F}from"./mat4-BUOhX8_y.js";import{c as V,f as o,d as b,a as $,b as q,n as E}from"./vec3-Cv4cOPFR.js";function P(){var r=new h(9);return h!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function R(){var r=new h(4);return h!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function I(r,n){var a=n[0],e=n[1],c=n[2],v=n[3],f=a*a+e*e+c*c+v*v;return f>0&&(f=1/Math.sqrt(f)),r[0]=a*f,r[1]=e*f,r[2]=c*f,r[3]=v*f,r}(function(){var r=R();return function(n,a,e,c,v,f){var i,t;for(a||(a=4),e||(e=0),c?t=Math.min(c*a+e,n.length):t=n.length,i=e;i<t;i+=a)r[0]=n[i],r[1]=n[i+1],r[2]=n[i+2],r[3]=n[i+3],v(r,r,f),n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3];return n}})();function x(){var r=new h(4);return h!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function T(r,n,a){a=a*.5;var e=Math.sin(a);return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[3]=Math.cos(a),r}function O(r,n,a){var e=n[0],c=n[1],v=n[2],f=n[3],i=a[0],t=a[1],s=a[2],l=a[3];return r[0]=e*l+f*i+c*s-v*t,r[1]=c*l+f*t+v*i-e*s,r[2]=v*l+f*s+e*t-c*i,r[3]=f*l-e*i-c*t-v*s,r}function p(r,n,a,e){var c=n[0],v=n[1],f=n[2],i=n[3],t=a[0],s=a[1],l=a[2],u=a[3],w,M,z,y,A;return M=c*t+v*s+f*l+i*u,M<0&&(M=-M,t=-t,s=-s,l=-l,u=-u),1-M>F?(w=Math.acos(M),z=Math.sin(w),y=Math.sin((1-e)*w)/z,A=Math.sin(e*w)/z):(y=1-e,A=e),r[0]=y*c+A*t,r[1]=y*v+A*s,r[2]=y*f+A*l,r[3]=y*i+A*u,r}function U(r,n){var a=n[0]+n[4]+n[8],e;if(a>0)e=Math.sqrt(a+1),r[3]=.5*e,e=.5/e,r[0]=(n[5]-n[7])*e,r[1]=(n[6]-n[2])*e,r[2]=(n[1]-n[3])*e;else{var c=0;n[4]>n[0]&&(c=1),n[8]>n[c*3+c]&&(c=2);var v=(c+1)%3,f=(c+2)%3;e=Math.sqrt(n[c*3+c]-n[v*3+v]-n[f*3+f]+1),r[c]=.5*e,e=.5/e,r[3]=(n[v*3+f]-n[f*3+v])*e,r[v]=(n[v*3+c]+n[c*3+v])*e,r[f]=(n[f*3+c]+n[c*3+f])*e}return r}var g=I;(function(){var r=V(),n=o(1,0,0),a=o(0,1,0);return function(e,c,v){var f=b(c,v);return f<-.999999?($(r,n,c),q(r)<1e-6&&$(r,a,c),E(r,r),T(e,r,Math.PI),e):f>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):($(r,c,v),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+f,g(e,e))}})();(function(){var r=x(),n=x();return function(a,e,c,v,f,i){return p(r,e,f,i),p(n,c,v,i),p(a,r,n,2*i*(1-i)),a}})();(function(){var r=P();return function(n,a,e,c){return r[0]=e[0],r[3]=e[1],r[6]=e[2],r[1]=c[0],r[4]=c[1],r[7]=c[2],r[2]=-a[0],r[5]=-a[1],r[8]=-a[2],g(n,U(n,r))}})();function Y(){var r=new h(2);return h!=Float32Array&&(r[0]=0,r[1]=0),r}function S(r,n){var a=new h(2);return a[0]=r,a[1]=n,a}function _(r,n){return r[0]=n[0],r[1]=n[1],r}function m(r,n,a){return r[0]=n,r[1]=a,r}(function(){var r=Y();return function(n,a,e,c,v,f){var i,t;for(a||(a=2),e||(e=0),c?t=Math.min(c*a+e,n.length):t=n.length,i=e;i<t;i+=a)r[0]=n[i],r[1]=n[i+1],v(r,r,f),n[i]=r[0],n[i+1]=r[1];return n}})();export{x as a,_ as b,Y as c,T as d,S as f,O as m,m as s};
