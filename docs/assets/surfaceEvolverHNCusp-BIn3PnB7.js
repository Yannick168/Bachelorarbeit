import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as N,P as M,W as y,D as v,f as b,B as E,F as I,l as S,m as z,c as A,n as L,V as w}from"./three.module-Dzl-6arX.js";import{O as P}from"./OrbitControls-C5UR_-od.js";import{d as W}from"./test-ypDAczKb.js";const h=new N,c=new M(45,window.innerWidth/window.innerHeight,.1,1e3);c.position.set(2,2,3);const u=new y({antialias:!0});u.setSize(window.innerWidth,window.innerHeight);u.setClearColor(16777215);document.body.appendChild(u.domElement);const m=new P(c,u.domElement);m.enableDamping=!0;const g=new v(16777215,.8);g.position.set(3,3,3);h.add(g);h.add(new b(4210752));window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)});function C(d){const i=d.split(`
`),n=[],a=[],l=[];let e=null;for(let t of i){if(t=t.trim(),t===""||t.startsWith("//")){e=null;continue}if(/^vertices\b/i.test(t)){e="vertices";continue}if(/^edges\b/i.test(t)){e="edges";continue}if(/^(faces|facets)\b/i.test(t)){e="faces";continue}if(e==="vertices"){const r=t.match(/\(\s*([\-\d.eE+]+)\s+([\-\d.eE+]+)\s+([\-\d.eE+]+)\s*\)/);if(r){const o=parseFloat(r[1]),f=parseFloat(r[2]),p=parseFloat(r[3]);if(!isNaN(o)&&!isNaN(f)&&!isNaN(p)){n.push([o,f,p]);continue}}const s=t.split(/\s+/);if(s.length>=4){const o=parseFloat(s[1]),f=parseFloat(s[2]),p=parseFloat(s[3]);!isNaN(o)&&!isNaN(f)&&!isNaN(p)&&n.push([o,f,p])}}if(e==="edges"){const r=t.split(/\s+/);if(r.length>=3){const s=parseInt(r[1])-1,o=parseInt(r[2])-1;!isNaN(s)&&!isNaN(o)&&a.push([s,o])}}if(e==="faces"){if(t==="bodies  /* facets */"){e=null;continue}const s=t.replace(/\/\*.*?\*\//g,"").replace(/^face\s+/i,"").trim().split(/\s+/),o=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];let f=[];for(let p of o){let x=Math.abs(p)-1;p<0?f.push(a[x][1]):f.push(a[x][0])}l.push(f)}}return{vertices:n,faces:l}}function B(d){const i=new E,n=[];for(const l of d.faces)if(!(!Array.isArray(l)||l.length!==3))for(const e of l){const t=d.vertices[e];if(!t){console.warn(`Fehlender Vertex fÃ¼r Index ${e}`);continue}const[r,s,o]=t;n.push(r,s,o)}i.setAttribute("position",new I(n,3)),i.computeVertexNormals();const a=new S({color:6724044,side:z,flatShading:!1});return new A(i,a)}function D(d){const i=new L().setFromObject(d),n=i.getSize(new w),a=i.getCenter(new w),e=(Math.max(n.x,n.y,n.z)*.6+1e-6)/Math.tan(c.fov*Math.PI/360);c.position.copy(a.clone().add(new w(e,e,e))),c.near=Math.max(.01,e*.01),c.far=Math.max(1e3,e*10),c.updateProjectionMatrix(),m.target.copy(a),m.update()}async function j(){const i=new URLSearchParams(location.search).get("fe"),n=i?"/Bachelorarbeit/"+i:W,a=await fetch(n);if(!a.ok)throw new Error(`Konnte ${n} nicht laden (${a.status})`);const l=await a.text(),e=C(l),t=B(e);h.clear(),h.add(g),h.add(new b(4210752)),h.add(t),D(t)}j().catch(d=>console.error(d));function F(){requestAnimationFrame(F),m.update(),u.render(h,c)}F();
